---
apiVersion: helm.toolkit.fluxcd.io/v2beta1
kind: HelmRelease
metadata:
  name: calibre-web
  namespace: default
spec:
  values:
    persistence:
      patches:
        enabled: true
        type: configMap
        name: calibre-web-code-patch
        subPath:
          - path: empty-file
            mountPath: /etc/s6-overlay/s6-rc.d/init-config-end/dependencies.d/init-calibre-web-code-patch
          - path: empty-file
            mountPath: /etc/s6-overlay/s6-rc.d/init-calibre-web-code-patch/dependencies.d/init-calibre-web-config
          - path: empty-file
            mountPath: /etc/s6-overlay/s6-rc.d/init-calibre-web-code-patch/dependencies.d/init-config
          - path: type
            mountPath: /etc/s6-overlay/s6-rc.d/init-calibre-web-code-patch/type
          - path: up
            mountPath: /etc/s6-overlay/s6-rc.d/init-calibre-web-code-patch/up
          - path: run
            mountPath: /etc/s6-overlay/s6-rc.d/init-calibre-web-code-patch/run
          - path: opds.py.patch
            mountPath: /etc/s6-overlay/s6-rc.d/init-calibre-web-code-patch/opds.py.patch
