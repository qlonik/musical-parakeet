---
apiVersion: helm.toolkit.fluxcd.io/v2beta2
kind: HelmRelease
metadata:
  name: paperless-ngx
spec:
  values:
    sidecars:
      gotenberg:
        image: docker.io/gotenberg/gotenberg:8.4.0@sha256:97a566eb0c9d8c103e90dc21970f6e0d05c3e41fb96f2ac2b28cd92f956df398
        # The gotenberg chromium route is used to convert .eml files. We do not
        # want to allow external content like tracking pixels or even javascript.
        args:
          - "gotenberg"
          - "--chromium-disable-javascript=true"
          - "--chromium-allow-list=file:///tmp/.*"
        securityContext:
          privileged: false
          runAsUser: 1001
          runAsGroup: 1001
        resources:
          requests:
            cpu: 200m
            memory: 250Mi
          limits:
            cpu: 1
            memory: 2Gi

      tika:
        image: ghcr.io/paperless-ngx/tika:2.9.1-minimal@sha256:8124eeb5d1c3aeff0577634ac1be8b7f6121c1f9bdfc0bfec84843f7325929f4
        resources:
          requests:
            cpu: 200m
            memory: 250Mi
          limits:
            cpu: 1
            memory: 2Gi
